Author: Daniel Kahn Gillmor <dkg@fifthhorseman.net>
Description: Drop subplot-driven tests

subplot is not available in debian, and it would require a lot
of additional packaging work.  Better to just avoid it for now.

This set of changes for the sake of reduced dependency subtrees
was guided by Lars Wirzenius from upstream.

This patched was modified by Peter Michael Green to support
sequoia-sq 0.33.0 and by Alexander KjÃ¤ll for 0.34.0

diff --git a/Cargo.toml b/Cargo.toml
index 4b9851c..7e02a0a 100644
--- a/Cargo.toml
+++ b/Cargo.toml
@@ -160,9 +160,6 @@ version = ">=2, <4"
 [dev-dependencies.regex]
 version = "1"
 
-[dev-dependencies.subplotlib]
-version = ">=0.7, <0.10"
-
 [build-dependencies.anyhow]
 version = "1.0.18"
 
@@ -204,10 +201,6 @@ default-features = false
 version = "1.0.137"
 features = ["derive"]
 
-[build-dependencies.subplot-build]
-version = ">=0.7, <0.10"
-optional = true
-
 [build-dependencies.terminal_size]
 version = ">=0.2.6, <0.4"
 
@@ -225,7 +218,6 @@ default = [
     "crypto-nettle",
     "dot-writer",
 ]
-subplot = ["subplot-build"]
 
 [badges.gitlab]
 repository = "sequoia-pgp/sequoia-sq"
diff --git a/build.rs b/build.rs
index 91fa909..aa5d3e0 100644
--- a/build.rs
+++ b/build.rs
@@ -18,11 +18,6 @@ pub mod man {
 fn main() {
     println!("cargo:rerun-if-changed=build.rs");
 
-    // Generate subplot tests.
-    #[cfg(feature = "subplot")]
-    subplot_build::codegen("sq.subplot")
-        .expect("failed to generate code with Subplot");
-
     let mut sq = cli::build(false);
     generate_shell_completions(&mut sq).unwrap();
     generate_man_pages(&sq).unwrap();
